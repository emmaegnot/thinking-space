<html lang="en">
<head>
 <meta charset="UTF-8">
 <script src="https://kit.fontawesome.com/7286f6060f.js" crossorigin="anonymous"></script>
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav class="mouseM">
        <ul class="header">
            <li><a>THE THINKING SPACE</a></li>
            <li class="home" style="float: right;"><a href="/"><i class="fa-solid fa-house"></i></a></li>
        </ul>
    </nav>

    <div class="container mouseM" style="width: 500px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
        <h2 class = "colouredText">Feeling force</h2>

        <p class="bodyText">How strong are your feelings right now? Press the plus and minus buttons!</p>
        
        <div class="meter-container">
            <img id="meter" src="images/meter.jpg" width="150" height="130">
            <img id="arrow" src="images/arrow.png" width="20" height="40">
        </div>

        <div style="display: flex; align-items: center; margin-top: -40px;">
            <div style="padding: 20px; margin-right: 70px;">
                <button onclick="decrease()">-</button>
            </div>

            <div style="padding: 20px; margin-left: 70px;">
                <button onclick="increase()">+</button>
            </div>
            
            <p id="clickCount"></p>

        </div>

    <!-- pass a force value -->

        <form id = "form" action="submit-force" method="post">
            <input id="clickCountInput" name="clickCount" type="hidden" value="5" >
            <div class="button-div" align="center">
                    <button onclick="sendDataToServer()" type="submit" id = "nextButton">NEXT</button>
            </div>
        </form>

        <form action="/previous-force" method="post">
            <div class="button-div" align="center">
                <button type="button-div" id="backButton">BACK</button>
            </div>
        </form>

    </div>
    
    <footer class="footer">
        <img class="logo" src="images/logo.png" alt="Raymer Enterprises Ltd" width="212" height="104">
        <span class="motto mouseM">With emotional health in mind</span>
    </footer>

    <script>
        function sendDataToServer() {
            document.getElementById("clickCountInput").value = clickCount;
            document.getElementById("form").submit();
        }
    
        document.getElementById("nextButton").addEventListener("click", function(event) {
            event.preventDefault();
            sendDataToServer(); 
        });

        let rotationAngle = 0; // Initial rotation angle
        let clickCount = 5;
        
        function decrease() {
            const n = -18; // Number of degrees to rotate on each click
            if (rotationAngle + n >= -100) {
            rotationAngle += n; // Increase the rotation by n degrees each time
            }
            if (clickCount > 0) {
                clickCount--;
            }

            document.getElementById("clickCount").innerHTML = clickCount;
            document.getElementById('arrow').style.transform = `translate(-50%, -50%) rotate(${rotationAngle}deg)`;
        }

        function increase() {
            const n = 18;
            if (rotationAngle + n <= 100) {
            rotationAngle += n;
            }
            if (clickCount < 10) {
                clickCount++;
            }

            document.getElementById("clickCount").innerHTML = clickCount;
            document.getElementById('arrow').style.transform = `translate(-50%, -50%) rotate(${rotationAngle}deg)`;
        }
    </script>

</body>
</html>
